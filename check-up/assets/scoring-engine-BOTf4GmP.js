function e(e){return e>=80?"Advanced":e>=60?"Established":e>=40?"Emerging":"Early"}const a=["usage_meetings","usage_email","usage_reports","usage_creative","usage_research","usage_data","usage_knowledge","usage_dev"],s=["eff_quality","eff_prompt_skill","eff_trust","eff_timeback","eff_enablement","eff_technique_diversity"],t={usage_meetings:"Meetings",usage_email:"Email",usage_reports:"Reports/Presentations",usage_creative:"Creative/Strategy",usage_research:"Research",usage_data:"Data/Analysis",usage_knowledge:"Knowledge/Search",usage_dev:"Dev/Automation"};function r(e){return 0===e.length?0:e.reduce((e,a)=>e+a,0)/e.length}function n(n){const c=[],i=[],o={};Object.values(t).forEach(e=>{o[e]=[]}),n.forEach(e=>{e.likertResponses&&e.likertResponses.forEach(r=>{const{itemId:n,rating:g}=r;if(null==g)return;const u=(g-1)/4*100;"usage"===e.categoryId&&a.includes(n)?(c.push(u),t[n]&&o[t[n]].push(u)):"effectiveness"===e.categoryId&&s.includes(n)&&i.push(u)})});const g=c.length>0?Math.round(r(c)):0,u=i.length>0?Math.round(r(i)):50,_=Math.round(.55*g+.45*u),f=e(_),l=[{category:"usage",raw_score:g,tier:e(g)},{category:"effectiveness",raw_score:u,tier:e(u)}];return Object.entries(t).forEach(([a,s])=>{const t=o[s];if(t&&t.length>0){const a=Math.round(r(t));l.push({category:s,raw_score:a,tier:e(a)})}}),{usage_score:g,effectiveness_score:u,composite_score:_,overall_tier:f,formula_applied:"0.55 × Usage + 0.45 × Effectiveness",category_scores:l}}function c(e){return!(!Array.isArray(e)||0===e.length)&&e.some(e=>"usage"===e.categoryId&&e.likertResponses&&e.likertResponses.length>0)}export{n as c,c as v};
