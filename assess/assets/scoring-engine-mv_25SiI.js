function e(e){return e>=80?"Advanced":e>=60?"Established":e>=40?"Emerging":"Early"}const t={usage_meetings:"Meetings",usage_email:"Email",usage_reports:"Reports/Presentations",usage_creative:"Creative/Strategy",usage_research:"Research",usage_data:"Data/Analysis",usage_knowledge:"Knowledge/Search",usage_dev:"Dev/Automation"},a=["eff_quality","eff_prompt_skill","eff_trust","eff_timeback","eff_enablement","eff_technique_diversity","eff_iteration","eff_verification"];function r(e){return 0===e.length?0:e.reduce((e,t)=>e+t,0)/e.length}function s(s,n){const i={},o=[],c=[];Object.values(t).forEach(e=>{i[e]=[]}),s.forEach(e=>{e.likertResponses&&e.likertResponses.forEach(e=>{const{itemId:r,rating:s}=e;if(null==s)return;const n=(s-1)/4*100;t[r]?(i[t[r]].push(n),o.push(n)):a.includes(r)&&c.push(n)})});const f=o.length>0?Math.round(r(o)):0,u=c.length>0?Math.round(r(c)):50;let _;if(n){const e=(g=n.coast_total,l=n.bonus_total,Math.round(g/10*80+l/3*20));_=Math.round(.4*f+.35*u+.25*e)}else _=Math.round(.55*f+.45*u);var g,l;const h=e(_),v=[];return Object.entries(t).forEach(([t,a])=>{const s=i[a];if(s&&s.length>0){const t=Math.round(r(s));v.push({category:a,raw_score:t,tier:e(t)})}}),{overall_score:_,overall_tier:h,category_scores:v}}function n(e){return!(!Array.isArray(e)||0===e.length)&&e.some(e=>e.likertResponses&&e.likertResponses.some(e=>e.itemId&&t[e.itemId]))}export{s as c,e as g,n as v};
