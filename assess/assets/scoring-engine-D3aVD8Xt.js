function e(e){return e>=80?"Advanced":e>=60?"Established":e>=40?"Emerging":"Early"}const t={usage_meetings:"Meetings",usage_email:"Email",usage_reports:"Reports/Presentations",usage_creative:"Creative/Strategy",usage_research:"Research",usage_data:"Data/Analysis",usage_knowledge:"Knowledge/Search",usage_dev:"Dev/Automation"},a=["eff_quality","eff_prompt_skill","eff_trust","eff_timeback","eff_enablement","eff_technique_diversity","eff_iteration","eff_verification"];function n(e){return 0===e.length?0:e.reduce((e,t)=>e+t,0)/e.length}function r(e,t){return Math.round(e/10*80+t/3*20)}function s(e){return Math.round(e/8*100)}function i(i,o,c){const f={},u=[],_=[];Object.values(t).forEach(e=>{f[e]=[]}),i.forEach(e=>{e.likertResponses&&e.likertResponses.forEach(e=>{const{itemId:n,rating:r}=e;if(null==r)return;const s=(r-1)/4*100;t[n]?(f[t[n]].push(s),u.push(s)):a.includes(n)&&_.push(s)})});const l=u.length>0?Math.round(n(u)):0,g=_.length>0?Math.round(n(_)):50;let h;const v=!!o,M=!!c;if(v&&M){const e=r(o.coast_total,o.bonus_total),t=s(c.rubric_total);h=Math.round(.3*l+.3*g+.2*e+.2*t)}else if(v){const e=r(o.coast_total,o.bonus_total);h=Math.round(.4*l+.35*g+.25*e)}else if(M){const e=s(c.rubric_total);h=Math.round(.4*l+.35*g+.25*e)}else h=Math.round(.55*l+.45*g);const d=e(h),m=[];return Object.entries(t).forEach(([t,a])=>{const r=f[a];if(r&&r.length>0){const t=Math.round(n(r));m.push({category:a,raw_score:t,tier:e(t)})}}),{overall_score:h,overall_tier:d,category_scores:m}}function o(e){return!(!Array.isArray(e)||0===e.length)&&e.some(e=>e.likertResponses&&e.likertResponses.some(e=>e.itemId&&t[e.itemId]))}export{i as c,e as g,o as v};
